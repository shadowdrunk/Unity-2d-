## 开发日志



##### 2024.10.23

​	搭建了基础测试场景的地图，编写了petal的行为控制脚步，具体实现为维护扩张进度，控制三个旋转的半径，在其中根据鼠标的输入进行线性插值。如果可以的话下次我想先实现一下木桩的脚本，让petal可以造成伤害。



##### 2024.10.24

​	丰富了Character基类的脚本，同时完善了部分petal的造成伤害的脚本，实现了测试伤害木桩的基础脚本，通过WorldSpace渲染模式的Canva来实现固定位置的气泡，实现测试木桩输出伤害，dps，和造成伤害的时间。目前发现木桩可能需要一个受击动画，但不是很急，可以先使用变红代替。后续想先实现一下装备花瓣的基础ui界面，允许同时装载多个花瓣（可能要考虑根据当前花瓣上限动态更新花瓣的初始位置，直接推一个数学公式）。



##### 2024.10.28

​	随便完善了下基础的UI系统，血条和petal的装配基础UI，因为今晚有cf，所以今日可能就到这了，后面实现一下petal装配UI的完善，根据花瓣数量动态分配位置，拖拽进行交换这些基础操作。



##### 2024.10.29

​	实现了花瓣装配界面脚本的基础初始化，可以更具屏幕的不同大小手算伸缩比例，只要不是异性屏幕应该都不会有问题，同时创建了一个GameManager来实现管控花瓣装配界面的展开。后续需要丰富装配界面，添加装配界面和角色实际花瓣的交互，根据装配界面的情况实际更新花瓣的位置和实装情况，注意需要先补全以下花瓣重生的问题。



##### 2024.10.30

​	完善了花瓣与敌人之间的战斗交互，发现，进行0.1s伤害间隔的造成伤害方式实现起来会有很多的问题，考虑修改为每次碰撞只计算一次伤害。同时修复了员花瓣装配界面的一些基本bug，在修改画布子对象的位置时我们需要保证画布时active的。

​	请教gpt后发现实际上战斗系统花瓣造成伤害仍然可以使用伤害间隔的形式，下次完善项目时先更改下战斗系统的核心造成伤害方式，同时维护一个角色控制的花瓣再生协程。之后再考虑完善装配界面UI，使得装配界面可以直接影响角色。



##### 2024.11.31

​	重构了一下战斗系统的底层和类的继承关系，这次花瓣的出伤改成了在花瓣脚本中控制的协程，使用hashset记录碰撞中的敌人来处理多个敌人的情况，同时将敌人的出伤机制也改成了这样，这样敌人也可以应对多个花瓣的问题。木桩敌人搭建有些略微麻烦，要自己到场景里调教，不过把它做成预制件应该也还好。之后当先完善一下放在角色中的花瓣刷新脚本，在尝试将花瓣管控接入到花瓣装配UI系统中。



##### 2024.11.2

​	在BasePetal类中实现了每个花瓣的自我重生，并且重新更新了花瓣装配UI界面的Prefab，但发现如果现在就写交互ui界面不太好处理之后和获得petal的交互。考虑之后先编写购买和刷新花瓣的ui界面，把获得花瓣的方法给搞定了，再开始写ui之间的交互，因为ui之间交互的结果会影响到游戏中的角色，所以可能有点难写。



##### 2024.11.7

​	熬过期中了，之前有一次的开发日志忘写了，目前实现了基本上商店界面的功能，包括刷新和随机产生花瓣卡片填充到商店里。注意，这个UI系统的开关我还没有和GameManager对接，并且当前花瓣卡片的功能也还需要丰富，我为其内置了一个button，要是现在点击的同时只要金钱够，我就把它添加到备战席中，然后再处理UI之间的交互。之后可以现实现UI界面和GameManager的对接，然后再实现ui之间的拖拽交互和另一个花瓣装配界面的交互。

